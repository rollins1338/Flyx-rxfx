# Cloudflare Worker configuration
name = "media-proxy"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Free tier: 100,000 requests/day
# Workers Paid: $5/month for 10M requests, unlimited bandwidth (much cheaper than Vercel!)

# Enable Workers Logs (viewable in Cloudflare Dashboard > Workers > Logs)
# Logs are automatically captured from console.log/error/warn

# Observability settings
[observability]
enabled = true

# Tail workers for real-time log streaming
# Run: npx wrangler tail media-proxy
# This streams logs in real-time to your terminal

# Environment variables - set via wrangler secret or Cloudflare dashboard
# wrangler secret put RPI_PROXY_URL
# wrangler secret put RPI_PROXY_KEY
[vars]
LOG_LEVEL = "debug"  # debug, info, warn, error
# API_KEY = "your-secret-key"  # Optional: for protecting the proxy

# Production environment
[env.production]
name = "media-proxy"
# Uncomment and configure if you have a custom domain:
# routes = [{ pattern = "proxy.yourdomain.com/*", zone_name = "yourdomain.com" }]

[env.production.observability]
enabled = true

# Development environment  
[env.development]
name = "media-proxy-dev"

[env.development.observability]
enabled = true
