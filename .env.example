# TMDB API Configuration
# Get your API key from: https://www.themoviedb.org/settings/api
# Use the Bearer token (Read Access Token) from TMDB API settings
TMDB_API_KEY=your_tmdb_bearer_token_here
NEXT_PUBLIC_TMDB_API_KEY=your_tmdb_api_key_here

# Database Configuration
# REQUIRED: Neon PostgreSQL connection string for production
# Get this from your Neon dashboard: https://console.neon.tech
# Format: postgresql://user:password@host/database?sslmode=require
# This is used for:
# - Analytics tracking (watch sessions, events)
# - Admin user management
# - Content statistics
# If not set, will fall back to local SQLite for development
DATABASE_URL=your_neon_database_url_here

# Optional: Unpooled connection (for migrations or direct access)
DATABASE_URL_UNPOOLED=your_unpooled_connection_string_here

# Optional: Individual PostgreSQL parameters (if constructing connection manually)
PGHOST=your_pg_host
PGHOST_UNPOOLED=your_pg_host_unpooled
PGUSER=your_pg_user
PGDATABASE=your_pg_database
PGPASSWORD=your_pg_password

# Optional: IP hashing salt for privacy (analytics)
# Used to anonymize IP addresses in analytics
# Generate a random string for production
IP_SALT=your_random_salt_here

# Optional: Cron job secret for automated tasks
# Used to secure the daily metrics update endpoint
# Generate a random string for production
CRON_SECRET=your_cron_secret_here

# Cloudflare Worker Proxy URLs (optional - for reduced bandwidth costs)
# Deploy the cloudflare-proxy worker and set these URLs
# Stream proxy: for 2embed/HLS streams and AnimeKai (MegaUp CDN)
# Routes: /stream (HLS), /animekai (MegaUp via RPI residential proxy)
NEXT_PUBLIC_CF_STREAM_PROXY_URL=https://media-proxy.your-subdomain.workers.dev/stream
# TV proxy: for DLHD live TV streams (base URL without route)
NEXT_PUBLIC_CF_TV_PROXY_URL=https://media-proxy.your-subdomain.workers.dev
# Analytics proxy: routes presence/events through CF instead of Vercel Edge
# Benefits: CF free tier (100k req/day), lower latency, no cold starts
# Set DATABASE_URL secret in your CF worker for this to work
NEXT_PUBLIC_CF_ANALYTICS_URL=https://media-proxy.your-subdomain.workers.dev/analytics

# Sync Worker: dedicated CF worker for cross-device sync
# Deploy cf-sync-worker and set this URL
# Benefits: Reduced Vercel costs, global edge latency
NEXT_PUBLIC_CF_SYNC_URL=https://flyx-sync.your-subdomain.workers.dev

# Dedicated Analytics Worker: separate CF worker for analytics (RECOMMENDED)
# Deploy cf-analytics-worker and set this URL
# Benefits: Dedicated worker, better isolation, easier debugging
# Takes priority over NEXT_PUBLIC_CF_ANALYTICS_URL if both are set
NEXT_PUBLIC_CF_ANALYTICS_WORKER_URL=https://flyx-analytics.your-subdomain.workers.dev

# TMDB proxy: routes all TMDB API calls through CF instead of Vercel Edge
# Benefits: Built-in edge caching, reduced Vercel costs
# Set TMDB_API_KEY secret in your CF worker for this to work
# If not set, falls back to Vercel API routes
NEXT_PUBLIC_CF_TMDB_URL=https://media-proxy.your-subdomain.workers.dev

# Live TV Proxy Mode
# Set to 'true' to use Oxylabs residential proxy (/dlhd route) for Live TV
# This is more reliable but uses residential IPs (requires Oxylabs credentials in worker)
# Set to 'false' or omit to use direct fetch with RPI fallback (/tv route)
NEXT_PUBLIC_USE_DLHD_PROXY=true

# RPI Proxy Configuration (for live TV CDN bypass and IPTV streams)
# The RPi proxy runs on a residential IP to bypass datacenter IP blocking
RPI_PROXY_URL=https://your-rpi-proxy.com
RPI_PROXY_KEY=your-rpi-proxy-api-key
# Public URL for client-side IPTV stream proxying (can be same as RPI_PROXY_URL)
NEXT_PUBLIC_RPI_PROXY_URL=https://your-rpi-proxy.com
# Public API key for client-side RPi proxy access (for IPTV streams in browser)
NEXT_PUBLIC_RPI_PROXY_KEY=your-rpi-proxy-api-key

# ⚠️ VidSrc Provider Configuration (SECURITY WARNING)
# VidSrc executes remote JavaScript code which poses security risks.
# This provider is DISABLED BY DEFAULT to protect users who clone this repo.
# Only enable if you understand the risks and have proper sandboxing configured.
# ENABLE_VIDSRC_PROVIDER=true

# Flixer Provider Configuration
# Flixer.sh is enabled by default. Set to 'false' to disable.
# ENABLE_FLIXER_PROVIDER=false

# Optional: Captcha Solving Service for Turnstile Bypass
# If Cloudflare Turnstile appears, this API key enables automatic solving
# Get an API key at https://capsolver.com (~$2-3 per 1000 solves)
# CAPSOLVER_API_KEY=your_capsolver_api_key_here

# Decoder Sandbox Configuration (REQUIRED if VidSrc is enabled)
# Deploy the cloudflare-proxy worker and use the /decode endpoint
# This runs untrusted decoder scripts in an isolated V8 sandbox
DECODER_SANDBOX_URL=https://media-proxy.your-subdomain.workers.dev
# Optional: API key to protect the sandbox endpoint
DECODER_SANDBOX_API_KEY=your-sandbox-api-key
# Allow local Node.js VM fallback (ONLY for development - auto-enabled in dev mode)
# In production, if DECODER_SANDBOX_URL is not set, VidSrc extraction will fail safely
# ALLOW_LOCAL_VM_FALLBACK=true

# Email Configuration (Forward Email)
# Used for sending responses to user feedback from support@vynx.cc
# Sign up at https://forwardemail.net and configure your domain
# Generate an API key/password from your Forward Email dashboard
SMTP_USER=support@vynx.cc
SMTP_PASS=your_forward_email_password_here
FROM_EMAIL=support@vynx.cc
FROM_NAME=Flyx Support
