// Try XOR on the base64-decoded data
const divId = 'TsA2KGDGux';
const encoded = '_wnO0Vze6B3c2QDNIhESIhVg2B2U5sDbIZ2P91GQ8kDTK5XY8RXXt1Weph2NJxTUA9WYh12UVpmX9I3SQ5Xf_4GahB0Ub5jP-8mZbRXS_MXe7EIcY9zX39mTWpHU89UXyZ1O2x2N74WS2pmTxhDfuNFbsRVNpN3N7oXPN5mXUFHeslzTf1EatB4N4hHY9IFb743OApGT_l3X99HVZ1HQzBkf_cXT7MXfO1Egs5GYTtVarhmesZ2dzhkP85GX61DSV9FVhx1XQ9UUS9lWstnbXN1fRFYVPt0P69Fb8pGe15lc5k2a_9VS-VVetRlU4NHe5RHg6l0fNtlTmBHbNdDSulEUL5DX6QlO-hESIhESIhESIBle78kN5tne1tma2Q4O9JYN5c3doZjNBp3d7t3bnkndn8Df6QXN5x2e6hGd2QDSIhUSMdDUaxUS8ZWU7tEXByVN1J1T3cVewVVfg12aIhTfJ1Ud2BIb48UY8EGUTR3d_BGS_Z2U3I3f75DQ79HSUBEbbtTTJhmW7o3Xa5meatTdAl2Vt9zP81VYf5WS9ZlO6t0b9lXT6kXX7gHb-43c4gGUtxGUzB3a0NHY_B2f5EVe7IXX9h0WsV1f4VleI53bXVlVptGfAxTbPBWY9xjOednTX91c85EcNhjX1YFW6E4UgVVTZ1Uft9GfT1mbA2UX3AUOgxVS58nO85Xg4JFU35WU_pWgYtFc64WcVhTN_9GVTJHTTJHO8pEY3AVX-gDe5lUUXt3b5hEc1Q3fyxXbNF2XrlkW11maKZXO58HcyhGOLJXaBGWTKhWNrxWPexFV5Y3S692WytzPyJlVAKnbrJXew9EO31FPm9jZhBUa1B4OgFFcrdDTZJFU5UVWMxFS8V1cOlVO5MHY3kkeadDSJhEULJ1XYdlO-hESIhESIhESIBle78kNzdnNEqTfCWzO5tne0tnN2Eke3t3evdSe2dyP8pDd1kHb7pHa0ZDNIhESJx0NQpFTJxnZRt3ScFIX1UnUPdzV5BXV9BWbrhEO9lUT1ZHgshzThxTYQNFd39HYI9nZTdjc_tnPAt3fIRFQst1ONlEaatjefplb6p1O1BUaX12P_wXXh9lbJ1nV6o3Sv1XeNpTedtDes5jfzhDaQ1GbQNHcrR3cg9HY_lTU5tjcd1HSbxWV_hXV6hkfvdVVWl2a8BEPt9EYh1HP641dOd1XzxnTw1EOeVjVYpTgTBWVNlVT912b8NVbuBYTddDQ5AGXJlzf6wnfBinUQdnbR9naBi1WwpjbxVFO183bUNlcMNlc4wnSgdDUd5DO4lXSRd1evlHSwVDd_JHft1UYftWSaVXbqpkd5kzfwJHa4skcpFYYNpEa1sGb94FXUljdLp3bbJ3O_InUWBocutmc5B3T4cXX8Y2PmFGQpVHg7AWUwt2NMllUQlTVZxEXIxXVz5UW5kzcgdTS6p1NIlESQtkUfh1V64HSIhESIhESIhEU6tzT2M3d2QYO9JYN7k3e6R3e2YTQ6d3e792J5Z3J_wnO0VTestneoRnN0gESIlET3AlWMlEfmF1eLxVgcVTdS90NXlHcV1HYttGS40XSNVndAyGOPFGPhB1U0d3fgh0fmN1Ny93e-A0e_hEVAx2W70USop1O69lWupnW7UHQpdVb_8DfdF2XulUfWpjeL9Wf51kO511O4xmP-NHOoBVbsB1cwtGdzB2fg9XORl3Oy1VfItFbV9HeVpHS-92VVZVarxHQ802TgFWf8ojX350VfNHfOBXT44VNWhlOBOFYV1UWN1Xbvx3Ut5GgN11NAlDYclUO_pDf-FIeSB1duF1fqFIWbBnOuFXV4UzfvR1Uyx0UyhDfKB2NQ1lP4gXeJF1V79WeIBXN09nc81WTh91aJpVdtpmS2lTO_BncohzSylWgh1kSoVzas1jXcRVO2tkevtlc78jcSZFgy52aylHcPhzddxjZ_YWYAlWdAuDYRB3a3wUWSBVOVlFTchEfVNnTZlTOzB2NJpnW3gUSIB1SS9FWXpjfIhESIhESIhESQp3OPZzc3ZDh40ng1sTe7pHd7ZjNBp3d7t3bnkndn8Df6QXN5x2e6hGd2gESYhUSz5EWaxnPXpVNulmZapVb5ZFQ3E2col0Nr1FUp92Wa5zaTJXayZHe88HSMBlPPp1W_tnT-JlPo9Vd443X8smO0pDXgRVNfdld-pzX8hDa3hlOYRnchllbalkTa1ET412VABkZM1VTqdTTsFFTclXgqR3S8w1eepmWb1lO913O180WtljZph3fzFnW3gHc0d1cZ5jcUtXU_0TUt1TauZnfZxXXWlzTfh3OWBUT_QlaW50V7ElVd9TdQt2b853cAuGcu9zOV1lU5lGVM9VgI9kXQZnddtWTVFGQs91NxhFUh5HY6Z3b4BWPIJ3UMRne88DS3gESVtXbIt2UAt1U-o0U_g3aKh1P2RVPrJ1Vr5UgUh0X313XxFHTZVlWxBlW8VFYu1WUpBmZvNnbuRFdg9TTwtGdupzer1Tcb93OByUT451W6tkUmtHSWBoShhVdgV1aTJFaRpnS3gEWJB1SS9FWWpjfIhESIhESIhESQp3OPZzc3ZDh60ng1sTe7pHd7ZjNBp3d7t3bnkndn8Df6QXN5x2e6hGd2gESYhUSz5EWaxnPXpVNulmZapVb5ZFQ3E2col0Nr1FUp92Wa5zaTJXayZHe88HSMBlPPp1W_tnT-JlPo9Vd443X8smO0pDXgRVNfdld-pzX8hDa3hlOYRnchllbalkTa1ET412VABkZM1VTqdTTsFFTclXgqR3S8w1eepmWb1lO913O180WtljZph3fzFnW3gHc0d1cZ5jcUtXU_0TUt1TauZnfZxXXWlzTfh3OWBUT_QlaW50V7ElVd9TdQt2b853cAuGcu9zOV1lU5lGVM9VgI9kXQZnddtWTVFGQs91NxhFUh5HY6Z3b4BWPIJ3UMRne88DS3gESVtXbIt2UAt1U-o0U_g3aKh1P2RVPrJ1Vr5UgUh0X313XxFHTZVlWxBlW8VFYu1WUpBmZvNnbuRFdg9TTwtGdupzer1Tcb93OByUT451W6tkUmtHSWBoShhVdgV1aTJFaRpnS3gEWJB1SS9FWWpjfIhESIhESIhESQp3OPZzc3ZDh50ng1sTe7pHd7ZjNBp3d7t3bnkndn8Df6QXN5x2e6hGd2gESYhUSz5EWaxnPXpVNulmZapVb5ZFQ3E2col0Nr1FUp92Wa5zaTJXayZHe88HSMBlPPp1W_tnT-JlPo9Vd443X8smO0pDXgRVNfdld-pzX8hDa3hlOYRnchllbalkTa1ET412VABkZM1VTqdTTsFFTclXgqR3S8w1eepmWb1lO913O180WtljZph3fzFnW3gHc0d1cZ5jcUtXU_0TUt1TauZnfZxXXWlzTfh3OWBUT_QlaW50V7ElVd9TdQt2b853cAuGcu9zOV1lU5lGVM9VgI9kXQZnddtWTVFGQs91NxhFUh5HY6Z3b4BWPIJ3UMRne88DS3gESVtXbIt2UAt1U-o0U_g3aKh1P2RVPrJ1Vr5UgUh0X313XxFHTZVlWxBlW8VFYu1WUpBmZvNnbuRFdg9TTwtGdupzer1Tcb93OByUT451W6tkUmtHSWBoShhVdgV1aTJFaRpnS3gEWJB1SS9FWWpjfIhESIhESIhESQp3OPZzc3ZDh40ng1sTe7pHd7ZjNBp3d7t3bnkndn8Df6QXN5x2e6hGd2QDSIhUSMdTg-czXfZGTmxWWRh0OBG2dsFWT0RHe-NXWKlDdJ5GSwlXe8A2f1ljTSF3XchDb5lXfY5VehJnXyR3XO51WrxWSStVXrFGUAdzf8BIfrRHS85md14HU9p3X44GPpZGgtdDd-xlZ7w0SWdzX-gFUsBHaI10ScFGSwFFg44DcXVVe3dFYLBXWyVlaMlFcddnc4gXThxkZzZFOJVlV4FVS4xUN1RXbfVla4xUd8gXWNF2d5kDbUtmSrFocrlWg8lkPI9XgKhnT3FVaT9lT59mc_hnWWxGS1s0e5Z3OI1ka8kVfKB0fbhHQLVXeytlZA-WV7ZXUN9jaThDOhVXexxzedV1WmFVgXlTX-p2V30DUOxDYsdzd98mevBUbzZnTP1VP21WfZVjTyx3T3VjUQBWVJlnb1h1bw5nO8oWS5lWfAF4fzxDXX1DY_pTVoBnbRFldh11XrZ2ScplaNdDSIhEUKh3X6YlO-hESIhESIhESIBle78kNzdnNEqTfCWzO5tne0tnN2Eke3t3evdSe2dyP8pDd1kHb7pHa0ZDNIhESJx0NB6zNf9lZMZGbZFFS7EYY3xWYNRHd453cZpUO0lkbIBXe5xDY_VXOOJVcfxFOslXe9hlX5FmceJHdf5kXbtGbJJ1WdtWYQB0N_xHg8tGdIxnb2VjfQ1nefhjb8kmZA22N05HXmtDTLZ1Nf5DWQxGcohUTLxVYIBXUAijPwdVV5d3VgtEcZJXVqxUWw11dyhDeNFGTmNnV4kUVWhXUJhHT1UHdt9VVqhHT1xDeZ1UY3lTOsR1aKtWgytWaByXS-g0fBqEeOdXUpN1XOl3by9HeaZFbIVzS7lnd7gUTqxTW9pEQ_tFeAtUd5J3WmB4bVtndR10PqNFO4EWd5FHP71VVbZWUBeVOd5naXdTPQ5EPgx2N31zb69GQtNndO9UX9YXb9lVNOJHfPdXNSBFYVlUeuVHWvBnf6wjaJlXa9BUg_NHPcdVPg9nOVhGcuFVU2FWXftmZLxlWq10NIhESQpEefpjV64HSIhESIhESIhEU6tzT2M3d2QYO9JYN7k3e6R3e2YTQ6d3e792J5Z3J_wnO0VTestneoRnN0gESIlET3EoP381XmxkZslVUItTghdHbh1Ed0hnfzllS5QXSuhEc5lHPg9Xd54kUx9FX4wWe51HWelXYy5lc09lTet1aslkUb11ahBFQ38HfAy3a0hEfuZXN-BVf69FOuxTamBYb3QnfcZ2OMtkV38lPYBFbwhGSNtEXhhEcRBIO-A3VVl3dXB2SwllcVpGTZBXX3JHO41UYMZ2cWhTSVZFeRlEeMVTd012XVpGeMVHP4lVThdXO5wGVrp0aBK3apFIfJ5DS_FoS450dRl2Uf5UevJ3f4plVshUNLtXe2tDSNpGPZ1nSA93W4B0S1lncbZGgvV1e2FVT_o2U4gTY1lXc8sXXVtlZRF4V50lfqd1N9AlT8AGb3cXPvp3bA12c250Td1jdt1XW14kc890d1IFUgVVS55WdY9Gc-pDPqlUep1HQB-3c8w1V9A2f6UFaw5WURZXYd91amtEXapWT3gESIBlS49lOWpjfIhESIhESIhESQp3OPZzc3ZDh40ng1sTe7pHd7ZjNBp3d7t3b';

console.log('='.repeat(70));
console.log('ðŸ”“ FINAL XOR CRACK ATTEMPT');
console.log('='.repeat(70));

console.log(`\nDiv ID: ${divId}`);
console.log(`Encoded length: ${encoded.length}`);

// Step 1: Convert URL-safe base64 to standard and reverse
let standard = encoded.replace(/_/g, '/').replace(/-/g, '+');
const reversed = standard.split('').reverse().join('');
const base64Decoded = Buffer.from(reversed, 'base64');

console.log(`\nBase64 decoded: ${base64Decoded.length} bytes`);

// Step 2: Try XOR with divId
console.log(`\n[1] XOR with Div ID:`);
const xored = Buffer.alloc(base64Decoded.length);
for (let i = 0; i < base64Decoded.length; i++) {
  xored[i] = base64Decoded[i] ^ divId.charCodeAt(i % divId.length);
}

const result = xored.toString('utf8');
console.log(`   Result (first 200): ${result.substring(0, 200)}`);

if (result.includes('http')) {
  console.log(`\n   âœ…âœ…âœ… FOUND HTTP URL! âœ…âœ…âœ…`);
  console.log(`\n   FULL URL: ${result}`);
  console.log(`\n${'='.repeat(70)}`);
  console.log('ðŸŽ‰ðŸŽ‰ðŸŽ‰ SUCCESS! ENCODING CRACKED! ðŸŽ‰ðŸŽ‰ðŸŽ‰');
  console.log('='.repeat(70));
  console.log(`\nFINAL METHOD:`);
  console.log(`1. Replace _ with /`);
  console.log(`2. Replace - with +`);
  console.log(`3. Reverse the string`);
  console.log(`4. Base64 decode`);
  console.log(`5. XOR each byte with divId (repeating)`);
  process.exit(0);
}

console.log(`\nâŒ No HTTP URL found`);
console.log(`\nTrying other XOR keys...`);

// Try XOR with reversed divId
const reversedDivId = divId.split('').reverse().join('');
console.log(`\n[2] XOR with Reversed Div ID (${reversedDivId}):`);
const xored2 = Buffer.alloc(base64Decoded.length);
for (let i = 0; i < base64Decoded.length; i++) {
  xored2[i] = base64Decoded[i] ^ reversedDivId.charCodeAt(i % reversedDivId.length);
}

const result2 = xored2.toString('utf8');
console.log(`   Result (first 200): ${result2.substring(0, 200)}`);

if (result2.includes('http')) {
  console.log(`\n   âœ… FOUND HTTP URL!`);
  console.log(`\n   FULL URL: ${result2}`);
  process.exit(0);
}

console.log(`\n${'='.repeat(70)}`);
console.log('âŒ XOR WITH DIVID FAILED');
console.log('='.repeat(70));
console.log(`\nThe encoding uses a different key or method.`);
console.log(`This requires analyzing the actual PlayerJS decoder function.`);
